<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Belly Rub Button with Explanation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive Meta Tag -->
  <style>
    body {
      text-align: center;
      font-family: Arial, sans-serif;
      margin: 20px; /* Adjusted for mobile spacing */
    }
    h1 {
      font-size: 24px;
    }
    button {
      padding: 15px 30px;
      font-size: 18px;
      cursor: pointer;
      width: 80%;
      max-width: 300px;
      margin: 10px auto;
    }
    #message {
      margin-top: 20px;
      font-size: 16px;
      color: #333;
    }
    #webhookId {
      width: 80%;
      max-width: 300px;
      padding: 8px;
      font-size: 16px;
      margin-bottom: 20px;
    }
    label {
      font-size: 16px;
    }
    /* Styles for the animated petting hand emoji */
    #pettingHand {
      margin: 20px auto;
      font-size: 80px;
      animation: pettingAnimation 1s infinite;
      display: none; /* Hidden by default */
    }
    @keyframes pettingAnimation {
      0% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
      100% { transform: translateY(0); }
    }
    /* Disabled button style */
    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
    /* "What's this?" section */
    #whatsThis {
      text-align: left;
      margin: 20px auto;
      width: 90%;
      max-width: 500px;
    }
    #whatsThis h2 {
      font-size: 20px;
      margin-bottom: 10px;
    }
    #whatsThis p {
      font-size: 16px;
      line-height: 1.5;
    }
  </style>
</head>
<body>
  <h1>Give the Puppy a Belly Rub!</h1>
  
  <!-- Webhook ID Input -->
  <div>
    <label for="webhookId">Webhook ID:</label><br>
    <input type="text" id="webhookId" value="WgCuJZ5WoHyX" />
  </div>
  
  <!-- Belly Rub Button -->
  <button id="bellyRubButton">üê∂ Belly Rub</button>
  
  <!-- Animated Petting Hand Emoji -->
  <div id="pettingHand">ü§ö</div>
  
  <!-- Message Display -->
  <p id="message">The puppy is ready for more pets.</p>
  
  <!-- "What's this?" Section -->
  <div id="whatsThis">
    <h2>What's this?</h2>
    <p>
      When you click the "Belly Rub" button, it activates a haptic device on the dog that simulates the feeling of belly rubs for 10 seconds. It's like giving the puppy a virtual belly rub from anywhere!
    </p>
    <p>
      The <strong>Webhook ID</strong> is needed to connect to the dog's haptic device. It tells the system which device to send the belly rub signal to. If you have your own device, you can enter your Webhook ID here.
    </p>
  </div>

  <script>
    document.getElementById('bellyRubButton').addEventListener('click', function () {
      const messageElement = document.getElementById('message');
      const webhookId = document.getElementById('webhookId').value.trim();
      const bellyRubButton = document.getElementById('bellyRubButton');
      const pettingHand = document.getElementById('pettingHand');

      if (!webhookId) {
        messageElement.textContent = '‚ö†Ô∏è Please enter a webhook ID.';
        return;
      }

      messageElement.textContent = 'Giving the puppy a belly rub...';
      bellyRubButton.disabled = true; // Disable the button
      pettingHand.style.display = 'block'; // Show the petting hand animation

      // Construct the webhook URL using the webhook ID from the input
      const webhookUrl = `https://webhook.xtoys.app/${encodeURIComponent(webhookId)}?action=slowpet`;

      fetch(webhookUrl, {
        method: 'GET',
        mode: 'no-cors' // Allows the request without CORS preflight
      })
      .then(() => {
        console.log('Webhook sent successfully');
        // Message will update after the animation
      })
      .catch((error) => {
        console.error('Error:', error);
        messageElement.textContent = '‚ö†Ô∏è Error sending the belly rub.';
      });

      // After 10 seconds, hide the petting hand and re-enable the button
      setTimeout(() => {
        pettingHand.style.display = 'none'; // Hide the petting hand animation
        bellyRubButton.disabled = false; // Re-enable the button
        messageElement.textContent = 'The puppy is ready for more pets.';
      }, 10000); // 10000 milliseconds = 10 seconds
    });
  </script>
</body>
</html>